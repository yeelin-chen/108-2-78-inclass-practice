course<-list(
year1=unique(courseStructure$`科目名稱`[pick_year&pick_major1]),
year2=unique(courseStructure$`科目名稱`[pick_year&pick_major2]),
year3=unique(courseStructure$`科目名稱`[pick_year&pick_major3]),
year4=unique(courseStructure$`科目名稱`[pick_year&pick_major4]))
return(course)
}
get_courses
# get_courses
jsonlite::fromJSON("https://www.dropbox.com/s/7myzzdnoor21hye/courseStructure2.json?dl=1") -> courseStructure
majors <- c("經濟系","社學系","社工系")
entranceYears <- 100:103
# 三系對100-103學年入學學生的四個年級課程規劃
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得經濟系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[1]])) ->
list_major1_allYears # 經濟系
majors <- c("經濟系","社學系","社工系")
entranceYears <- 100:103
# 三系對100-103學年入學學生的四個年級課程規劃
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得經濟系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[1]])) ->
list_major1_allYears # 經濟系
same_grade<-function(entranceYear,grade){ pick_year<-courseStructure$`學年`==as.character(entranceYear)
pick_grade<-str_detect(courseStructure$`應修系級`,paste0("經濟系",as.character(grade)))
course_grade<-courseStructure$`科目名稱`[pick_grade&pick_year]return(course_grade)}
knitr::opts_chunk$set(echo = F, eval=F)
library(readr); library(stringr); library(purrr); library(magrittr); library(lubridate)
jsonlite::fromJSON("https://www.dropbox.com/s/7myzzdnoor21hye/courseStructure2.json?dl=1") -> courseStructure
list(
year1=一年級不重覆科目名稱（class character）,
get_courses<-function(entranceYear, major){
pick_year<-courseStructure$`學年`==as.character(entranceYear)
pick_major1<-str_detect(courseStructure$`應修系級`,paste0(major,"1"))
pick_major2<-str_detect(courseStructure$`應修系級`,paste0(major,"2"))
pick_major3<-str_detect(courseStructure$`應修系級`,paste0(major,"3"))
pick_major4<-str_detect(courseStructure$`應修系級`,paste0(major,"4"))
course<-list(
year1=unique(courseStructure$`科目名稱`[pick_year&pick_major1]),
year2=unique(courseStructure$`科目名稱`[pick_year&pick_major2]),
year3=unique(courseStructure$`科目名稱`[pick_year&pick_major3]),
year4=unique(courseStructure$`科目名稱`[pick_year&pick_major4]))
return(course)
}
get_courses
# get_courses
majors <- c("經濟系","社學系","社工系")
entranceYears <- 100:103
# 三系對100-103學年入學學生的四個年級課程規劃
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得經濟系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[1]])) ->
list_major1_allYears # 經濟系
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得社會系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[2]])) ->
list_major2_allYears # 社會系
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得社工系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[3]])) ->
list_major3_allYears # 社工系
str(list_major1_allYears)
majors <- c("經濟系","社學系","社工系")
entranceYears <- 100:103
# 三系對100-103學年入學學生的四個年級課程規劃
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得經濟系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[1]])) ->
list_major1_allYears # 經濟系
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得社會系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[2]])) ->
list_major2_allYears # 社會系
# 針對entranceYears裡每一個元素一一代到get_course函數
# 求得社工系100-103入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, majors[[3]])) ->
list_major3_allYears # 社工系
str(list_major1_allYears)
get_coursesAllYears <- function(entranceYears, major){
# 可以針對「單一」major系對entranceYears裡不同入學年一一求算該系對該入學年學生的系課程規劃科目種類
entranceYears %>%
map(~get_courses(.x, major)) ->
list_major1_allYears
return(list_major1_allYears)
}
# 一一將majors裡的系取出進行get_coursesAllYears運算以得到「取出系」在不同entranceYears入學年下的系課程規劃。
majors %>%
map(~get_coursesAllYears(entranceYears, .x)) -> list_coursesAllMajorsAllYears
same_grade<-function(entranceYear,grade){ pick_year<-courseStructure$`學年`==as.character(entranceYear)
pick_grade<-str_detect(courseStructure$`應修系級`,paste0("經濟系",as.character(grade)))
course_grade<-courseStructure$`科目名稱`[pick_grade&pick_year]return(course_grade)}
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear}
pick_major<-str_detect(courseStructure$`應修系級`,major)
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear}
pick_major<-str_detect(courseStructure$`應修系級`,"major")
course<-courseStructure$`科目名稱`[pick_year&pick_major]return(course)
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear}
pick_major<-str_detect(courseStructure$`應修系級`,"major")
course<-courseStructure$`科目名稱`[pick_year&pick_major]
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear}
pick_major<-str_detect(courseStructure$`應修系級`,"major")
course<-courseStructure$`科目名稱`[pick_year&pick_major]
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,"major")
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103
year1=map(entranceYear,same_grade(.x,1))
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103
year1=map(entranceYear,same_grade(.x,1))
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103
year1=map(entranceYear,same_grade(.x,1)),
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103,
year1=map(entranceYear,same_grade(.x,1)),
year2=map(entranceYear,same_grade(.x,2)),
year3=map(entranceYear,same_grade(.x,3)),
year4=map(entranceYear,same_grade(.x,4))
)
entranceYear[[1]]
list_econCourseCounts<-list(
entranceYear=100:103,
year1=map(entranceYear,same_grade(.x,1)),
year2=map(entranceYear,same_grade(.x,2)),
year3=map(entranceYear,same_grade(.x,3)),
year4=map(entranceYear,same_grade(.x,4))
)
entranceYear=100:103
entranceYear[[1]]
entranceYear[[2]]
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103,
year1=map(entranceYear,same_grade(.x,1)),
year2=map(entranceYear,same_grade(.x,2)),
year3=map(entranceYear,same_grade(.x,3)),
year4=map(entranceYear,same_grade(.x,4))
)
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103,
year1=map(entranceYear,~same_grade(.x,1)),
year2=map(entranceYear,~same_grade(.x,2)),
year3=map(entranceYear,~same_grade(.x,3)),
year4=map(entranceYear,~same_grade(.x,4))
)
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103,
year1=map(entranceYear,~same_grade(.x,"經濟系1")),
year2=map(entranceYear,~same_grade(.x,"經濟系2")),
year3=map(entranceYear,~same_grade(.x,"經濟系3")),
year4=map(entranceYear,~same_grade(.x,"經濟系4"))
)
# list_econCourseCounts
list_econCourseCounts
length(hmap(entranceYear,~same_grade(.x,"經濟系1")))
length(map(entranceYear,~same_grade(.x,"經濟系1")))
length(unlist(map(entranceYear,~same_grade(.x,"經濟系1"))))
same_grade<-function(entranceYear,major){
pick_year<-courseStructure$`學年`==entranceYear
pick_major<-str_detect(courseStructure$`應修系級`,major)
course<-courseStructure$`科目名稱`[pick_year&pick_major]
return(course)}
list_econCourseCounts<-list(
entranceYear=100:103,
year1=length(unlist(map(entranceYear,~same_grade(.x,"經濟系1")))),
year2=length(unlist(map(entranceYear,~same_grade(.x,"經濟系2")))),
year3=length(unlist(map(entranceYear,~same_grade(.x,"經濟系3")))),
year4=length(unlist(map(entranceYear,~same_grade(.x,"經濟系4"))))
)
list_econCourseCounts
# list_econCourseCounts
data.frame(
weekday = str_c("星期",c("天","一","二","三","四","五","六")),
number = c(1:7)
) -> weekday_chart
t_date<-today()
wday(t_date)
# 1st_next_date
data.frame(
weekday = str_c("星期",c("天","一","二","三","四","五","六")),
number = c(1:7)
) -> weekday_chart
View(weekday_chart)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
chart <- list(
`雙` = c(1,3,5,7),
`單` = c(1,2,4,6)
)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
num<-Mask$`身分證字號`[[1]]
odd_or_even<-function(num){
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
return(`1st_odd_or_even`)}
odd_or_even
# odd_or_even
read_csv("https://www.dropbox.com/s/9xzccsvwrnctzul/mask.csv?dl=1") -> Mask
num<-Mask$`身分證字號`[[1]]
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
`1st_odd_or_even`
# `1st_odd_or_even`
num<-Mask$`身分證字號`[[1]]
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
`1st_odd_or_even`
# `1st_odd_or_even`
odd_or_even<-function(num){
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
return(`1st_odd_or_even`)}
odd_or_even
# odd_or_even
data.frame(
weekday = str_c("星期",c("天","一","二","三","四","五","六")),
number = c(1:7)
) -> weekday_chart
t_date<-today()
wday(t_date)
chart <- list(
`雙` = c(1,3,5,7),
`單` = c(1,2,4,6)
)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
# 1st_next_date
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
odd_or_even(Mask$身分證字號[[1]])
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
`1st_odd_or_even`
View(Mask)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
chart <- list(
`雙` = c(1,3,5,7),
`單` = c(1,2,4,6)
)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
buyable<-function(last_num){
t_date<-today()
chart <- list(
`單` = c(1,2,4,6),
`雙` = c(1,3,5,7)
)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
}
# 1st_next_date
knitr::opts_chunk$set(echo = F, eval=F)
library(readr); library(stringr); library(purrr); library(magrittr); library(lubridate)
surface_A<-15*10*2+15*20*2+20*10*2
surface_A
# surface_A
surface_cube<-function(len,wet,hi)
{sur<-len*wet*2+len*hi*2+wet*hi*2
return(sur)}
surface_cube(20,10,15)
surface_cube
# surface_cube
read_csv("https://www.dropbox.com/s/9xzccsvwrnctzul/mask.csv?dl=1") -> Mask
num<-Mask$`身分證字號`[[1]]
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
`1st_odd_or_even`
# `1st_odd_or_even`
num<-Mask$`身分證字號`[[1]]
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
`1st_odd_or_even`
# `1st_odd_or_even`
odd_or_even<-function(num){
num<-as.character(num)
last_num<-as.integer(str_extract(num,"[:graph:]$"))
`1st_odd_or_even`<-last_num %% 2
return(`1st_odd_or_even`)}
odd_or_even
# odd_or_even
data.frame(
weekday = str_c("星期",c("天","一","二","三","四","五","六")),
number = c(1:7)
) -> weekday_chart
chart <- list(
`雙` = c(1,3,5,7),
`單` = c(1,2,4,6)
)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
buyable<-function(last_num){
t_date<-today()
chart <- list(
`單` = c(1,2,4,6),
`雙` = c(1,3,5,7)
)
chart[[odd_or_even(Mask$`身分證字號`[[1]])+1]]
}
# 1st_next_date
knitr::opts_chunk$set(echo = TRUE)
convert_TaiwanDate2WesternDate <- function(twDate){
if(!require("stringr")){
install.packages("stringr")
}
if(!require("lubridate")){
install.packages("lubridate")
}
library(stringr)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
# 取出民國年，計算西元年
year <-
str_extract(
twDate,
regex_pattern)
westernYear <- as.integer(year)+1911
# 替換民國xx年的xx成西元年數字
str_replace(
twDate,
regex_pattern,  # 要換掉的文字
as.character(westernYear) # 要替換的內容
) -> twDate_reformat
lubridate::ymd(twDate_reformat) -> westernDate
return(westernDate)
}
str_extract(twDate,
regex_pattern)
library(stringr)
str_extract(twDate,
regex_pattern)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
str_extract(twDate,
regex_pattern)
library(stringr)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
library(stringr)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
str_extract(twDate,
regex_pattern)
convert_TaiwanDate2WesternDate <- function(twDate){
if(!require("stringr")){
install.packages("stringr")
}
if(!require("lubridate")){
install.packages("lubridate")
}
library(stringr)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
str_extract(twDate,
regex_pattern)
# 取出民國年，計算西元年
year <-
str_extract(
twDate,
regex_pattern)
westernYear <- as.integer(year)+1911
# 替換民國xx年的xx成西元年數字
str_replace(
twDate,
regex_pattern,  # 要換掉的文字
as.character(westernYear) # 要替換的內容
) -> twDate_reformat
lubridate::ymd(twDate_reformat) -> westernDate
return(westernDate)
}
convert_TaiwanDate2WesternDate <- function(twDate){
if(!require("stringr")){
install.packages("stringr")
}
if(!require("lubridate")){
install.packages("lubridate")
}
library(stringr)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
str_extract(twDate,
regex_pattern)
# 取出民國年，計算西元年
year <-
str_extract(
twDate,
regex_pattern)
westernYear <- as.integer(year)+1911
# 替換民國xx年的xx成西元年數字
str_replace(
twDate,
regex_pattern,  # 要換掉的文字
as.character(westernYear) # 要替換的內容
) -> twDate_reformat
lubridate::ymd(twDate_reformat) -> westernDate
return(westernDate)
}
convert_TaiwanDate2WesternDate <- function(twDate){
library(stringr)
regex_pattern <-
"(?<=民國)[0-9]+(?=年)"
# 取出民國年，計算西元年
year <-
str_extract(
twDate,
regex_pattern)
westernYear <- as.integer(year)+1911
# 替換民國xx年的xx成西元年數字
str_replace(
twDate,
regex_pattern,  # 要換掉的文字
as.character(westernYear) # 要替換的內容
) -> twDate_reformat
lubridate::ymd(twDate_reformat) -> westernDate
return(westernDate)
}
twDate <-  c("民國108年12月5日","民國98年10月5日")
convert_TaiwanDate2WesternDate(twDate)
year <-
str_extract(
twDate,
regex_pattern)
convert_TaiwanDate2WesternDate(twDate)
twDate
year
askSilly_weather2 <- function(locationInput,dateInput){
if(!exists("weather_next36hours")){
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
SOAR::Store(weather_next36hours) # 存在.R_cache environment中
}
(weather_next36hours$cwbopendata$dataset$location$locationName == locationInput) -> pick_location
weather_next36hours$cwbopendata$dataset$location$weatherElement[pick_location][[1]] -> weatherAtLocation
(weatherAtLocation$elementName=="MaxT") ->
pick_MaxT
(weatherAtLocation$elementName=="MinT") ->
pick_MinT
weatherAtLocation$time[pick_MaxT][[1]]$parameter$parameterName[[1]] -> maxT
weatherAtLocation$time[pick_MinT][[1]]$parameter$parameterName[[1]] -> minT
glue::glue("{locationInput} {dateInput} 氣溫，最高{maxT}度，最低{minT}度。")
}
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr)
# poem_song
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr)
library(jsonlite); library(readr)
fromJSON("https://www.dropbox.com/s/b59ye5qoxnwhzu9/poem_song.json?dl=1", simplifyDataFrame = F) -> poem_song
fromJSON("https://www.dropbox.com/s/mjvaqdu4gufblag/poem_new.json?dl=1", simplifyDataFrame = F) -> poem_new
read.csv("https://www.dropbox.com/s/oyzvb3d05igb05e/poem_songOrder.csv?dl=1")$x -> poem_songOrder
poem_song
poem_song
poem_songOrder
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr)
library(jsonlite); library(readr)
fromJSON("https://www.dropbox.com/s/b59ye5qoxnwhzu9/poem_song.json?dl=1", simplifyDataFrame = F) -> poem_song
fromJSON("https://www.dropbox.com/s/mjvaqdu4gufblag/poem_new.json?dl=1", simplifyDataFrame = F) -> poem_new
read.csv("https://www.dropbox.com/s/oyzvb3d05igb05e/poem_songOrder.csv?dl=1")$x -> poem_songOrder
View(poem_new)
View(poem_song)
poem_songOrder[1:6]
poem_song[1:6]
poem_song[poem_songOrder[1:6]]
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
view(post)
View(post)
