r
r=str_extract(bear[6,],"[:alnum:]$")
r
bear[6,][[3]]
best_choice<-function(c){
r=c[[3]]
if(r<6){"少消費蛋糕、多消費甜甜圈"
}else if(r>6){"多消費蛋糕、少消費甜甜圈"
}else{"維持現有消費組合"
}
}
best_choice(bear[6,])
# best_choice
r=dimname(bear[6,])[[1]]
r=dimnames(bear[6,])[[1]]
r
r=dimnames(bear[6,])
r
bear[6,3]
bear[6,]
r=str_extract(bear[6,],"[:digit:]")
r=str_extract(bear[6,],"[:digit:]")
r
bear[6,]
r=str_extract(bear[6,],"[:digit:]")
r
bear[6,]
best_choice<-function(c){
if(c[[3]]<30&c[[1]]>5){"少消費蛋糕、多消費甜甜圈"
}else if(c[[3]]>30&c[[1]]<5){"多消費蛋糕、少消費甜甜圈"
}else{"維持現有消費組合"
}
}
best_choice(bear[6,])
# best_choice
best_choice<-function(c){
if(c[[3]]<30&c[[1]]>5){"少消費蛋糕、多消費甜甜圈"
}else if(c[[3]]>30&c[[1]]<5){"多消費蛋糕、少消費甜甜圈"
}else{"維持現有消費組合"
}
}
best_choice
# best_choice
best_choice(bear[6,])
best_choice(bear[5,])
best_choice(bear[6,])
browseURL("https://docs.google.com/spreadsheets/d/1bdb4XPEwrQByujQ79PeQ5D0V_157ouRrRVDiA9cs3B0/edit#gid=0")
browseURL("https://docs.google.com/spreadsheets/d/1bdb4XPEwrQByujQ79PeQ5D0V_157ouRrRVDiA9cs3B0/edit#gid=0")
seatingChart<-list(
row1=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row2=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row3=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row4=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row5=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row6=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row7=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0))
# seatingChart
seatingChart<-list(
row1=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row2=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row3=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row4=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row5=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row6=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row7=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0))
seatingChart
# seatingChart
str(seatingChart)
seatingChart
row1[1:2,4:7,9]
seatingChart<-list(
row1=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row2=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row3=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row4=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row5=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row6=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row7=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0))
seatingChart
# seatingChart
seatingChart$row1[1:2,4:7,9]
seatingChart$row1[1-2,4-7,9]
seatingChart$row1!=-1
seatingChart$row1(seatingChart$row1!=-1)
seatingChart$row1[seatingChart$row1!=-1]
names(seatingChart$row1[seatingChart$row1!=-1])
names(seatingChart$row1[seatingChart$row1!=-1])
list_availableSeats<-function(row){
map(seatingChart,~names(.x[.x!=-1]))
}
# list_availableSeats
map(seatingChart,~names(.x[.x!=-1]))
num=names(seatingChart$row1[seatingChart$row1!=-1])
paste0(seatingChart$row1,num)
paste0(names(seatingChart$row1),num)
paste0(names(seatingChart),-,num)
paste0(names(seatingChart),num)
num
num=names(seatingChart$row1[seatingChart$row1!=-1])
num
paste0(names(seatingChart),num)
num=names(seatingChart$row1[seatingChart$row1!=-1])
num
paste0(names(seatingChart[[1]]),num)
map(seatingChart$row1,~.x)
map(seatingChart$row1,~.x)!=-1
list_availableSeats<-function(seatingChart){
if(seatingChart$row1){}
map(seatingChart,~.x
map(seatingChart,~y,map(seatingChart.y,~.x)!=-1
map(seatingChart$row1,~.x)
map(seatingChart$row1,~.x)!=-1
seatingChart$row1[map(seatingChart$row1,~.x)!=-1]
num
num=seatingChart$row1[map(seatingChart$row1,~.x)!=-1]
num
names(num)
num
names(num)
map(seatingChart,~.x)
names(map(seatingChart,~.x))
paste0(row,num)
row
num
row
num
num=names(num)
row=names(map(seatingChart,~.x))
row
num
map(row,~paste0(.x,num))
map(row,~paste0(.x,-num))
map(row,~paste0(.x,num))
unlist(map(row,~paste0(.x,num)))
unlist(map(row,~paste0(.x,num)))
unlist(map(row,~paste0(.x"-",num)))
unlist(map(row,~paste0(.x-,num)))
unlist(map(row,~paste0(.x,num)))
num=paste0("-",names(num))
num
num=paste0("-",names(num))
num
num=paste0("-",names(num))
num
num=seatingChart$row1[map(seatingChart$row1,~.x)!=-1]
num=paste0("-",names(num))
num
unlist(map(row,~paste0(.x,num)))
list_availableSeats<-function(seatingChart){
num=seatingChart$row1[map(seatingChart$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatingChart,~.x))
unlist(map(row,~paste0(.x,num)))
}
# list_availableSeats
list_availableSeats<-function(seatingChart){
num=seatingChart$row1[map(seatingChart$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatingChart,~.x))
return(unlist(map(row,~paste0(.x,num))))
}
list_availableSeats
# list_availableSeats
list_availableSeats<-function(seatall){
num=seatingChart$row1[map(seatall$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatall,~.x))
return(unlist(map(row,~paste0(.x,num))))
}
list_availableSeats
# list_availableSeats
list_availableSeats(seatingChart)
best_choice<-function(c){
if(c[[3]]<30&c[[1]]>5){"少消費蛋糕、多消費甜甜圈"
}else if(c[[3]]<30&c[[1]]<5){"多消費蛋糕、少消費甜甜圈"
}else{"維持現有消費組合"
}
}
best_choice(bear[6,])
best_choice
# best_choice
knitr::opts_chunk$set(echo = F, eval=F)
library(readr); library(stringr); library(purrr); library(magrittr); library(lubridate); library(jsonlite)
fromJSON("https://data.ntpc.gov.tw/api/datasets/C3FFC733-C2E3-42C6-9C14-CDDDDF3D2AEC/json/preview") -> ntpc_building_info
pickpark<-str_detect(ntpc_building_info$name,"停車場")
info_park<-map(ntpc_building_info,~.x[pickpark])
ntpc_building_parking<-data.frame(type=info_park[[1]],floer=info_park[[2]],name=info_park[[3]],name_en=info_park[[4]])
ntpc_building_parking
# ntpc_building_parking
no_found<-function(k){ if(sum(str_detect(ntpc_building_info$name,k))==0){warning("No Found")
}
}
# no_found
search_engine<-function(k){
if(sum(str_detect(ntpc_building_info$name,k))==0){warning("No Found")
}else{
pick_k<-str_detect(ntpc_building_info$name,k)
info_k<-map(ntpc_building_info,~.x[pick_k])
ntpc_building_k<-data.frame(type=info_k[[1]],floer=info_k[[2]],name=info_k[[3]],name_en=info_k[[4]])
return(ntpc_building_k)
}
}
search_engine
# search_engine
read_csv("https://www.dropbox.com/s/8mlf6cory32q1eq/bear.csv?dl=1") ->
bear
best_choice<-function(c){
if(c[[3]]<30&c[[1]]>5){"少消費蛋糕、多消費甜甜圈"
}else if(c[[3]]<30&c[[1]]<5){"多消費蛋糕、少消費甜甜圈"
}else{"維持現有消費組合"
}
}
best_choice(bear[6,])
best_choice
# best_choice
browseURL("https://docs.google.com/spreadsheets/d/1bdb4XPEwrQByujQ79PeQ5D0V_157ouRrRVDiA9cs3B0/edit#gid=0")
seatingChart<-list(
row1=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row2=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row3=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row4=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row5=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row6=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row7=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0))
seatingChart
# seatingChart
list_availableSeats<-function(seatall){
num=seatingChart$row1[map(seatall$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatall,~.x))
return(unlist(map(row,~paste0(.x,num))))
}
list_availableSeats(seatingChart)
list_availableSeats
# list_availableSeats
names(num)
num=seatingChart$row1[map(seatall$row1,~.x)!=-1]
list_availableSeats<-function(seatall){
num=seatingChart$row1[map(seatall$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatall,~.x))
return(unlist(map(row,~paste0(.x,num))))
names(num)
}
names(num)
list_availableSeats<-function(seatall){
num=seatingChart$row1[map(seatall$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatall,~.x))
return(unlist(map(row,~paste0(.x,num))))
}
list_availableSeats(seatingChart)
list_availableSeats
# list_availableSeats
str_extract(selectedSeat,"^[:digit:]")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
seatingChart["re_row"]["re_num"]<--1
}
}
# update_seatingChart
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
seatingChart["re_row"]["re_num"]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
# update_seatingChart
update_seatingChart(seatingChart, "row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
listname=seatingChart[seatingChart==rm_row]
seatingChart[listname]["re_num"]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart, "row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
listname=seatingChart[seatingChart==rm_row]
seatingChart[listname]["re_num"]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart, "row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
seatingChart[seatingChart==rm_row][names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart, "row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart[needrow][names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart, "row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart$needrow[names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart, "row1-7")
update_seatingChart
# update_seatingChart
knitr::opts_chunk$set(echo = F, eval=F)
library(readr); library(stringr); library(purrr); library(magrittr); library(lubridate); library(jsonlite)
browseURL("https://docs.google.com/spreadsheets/d/1bdb4XPEwrQByujQ79PeQ5D0V_157ouRrRVDiA9cs3B0/edit#gid=0")
seatingChart<-list(
row1=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row2=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row3=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row4=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row5=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row6=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0),
row7=c("7"=0,"5"=0,"A1"=-1,"3"=0,"1"=0,"2"=0,"4"=0,"A2"=-1,"6"=0))
seatingChart
# seatingChart
list_availableSeats<-function(seatall){
num=seatingChart$row1[map(seatall$row1,~.x)!=-1]
num=paste0("-",names(num))
row=names(map(seatall,~.x))
return(unlist(map(row,~paste0(.x,num))))
}
list_availableSeats(seatingChart)
list_availableSeats
# list_availableSeats
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart$needrow[names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart, "row1-7")
update_seatingChart
# update_seatingChart
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]+3[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart$needrow[names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
update_seatingChart
# update_seatingChart
```{r}
str_extract("row1-7","[:lower:]+3[:digit:]")
```
library(stringr)
str_extract("row1-7","[:lower:]+3[:digit:]")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart$needrow[names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
update_seatingChart
# update_seatingChart
library(stringr)
str_extract("row1-7","[:lower:]{1,3}[:digit:]"")
library(stringr)
str_extract("row1-7","[:lower:]{1,3}[:digit:]")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart$needrow[names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
update_seatingChart
# update_seatingChart
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart[needrow][names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart[needrow]
[names(seatingChart$row1)==re_num]<--1
jsonlite::fromJSON("https://www.dropbox.com/s/eb4xcfp97ro7m3y/animal_names.json?dl=1") -> animal_friends
animal15 <- animal_friends[1:15]
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart[needrow]
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChartseatingChart[spaceseat==re_num][names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
update_seatingChart<-function(seatingChart, selectedSeat){
spaceseat<-list_availableSeats(seatingChart)
if(selectedSeat%in%spaceseat){
rm_row=str_extract(selectedSeat,"[:lower:]{1,3}[:digit:]")
re_num=str_extract(selectedSeat,"(?=-)[:digit:]")
needrow=seatingChart[seatingChart==rm_row]
seatingChart[spaceseat==re_num][names(seatingChart$row1)==re_num]<--1
return(seatingChart)
}else{
warning("很抱歉您所選的位置已無法選")
return(seatingChart)
}
}
update_seatingChart(seatingChart,"row1-7")
jsonlite::fromJSON("https://www.dropbox.com/s/eb4xcfp97ro7m3y/animal_names.json?dl=1") -> animal_friends
animal15 <- animal_friends[1:15]
